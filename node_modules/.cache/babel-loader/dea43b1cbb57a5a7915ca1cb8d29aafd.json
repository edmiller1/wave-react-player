{"ast":null,"code":"import _regeneratorRuntime from\"/Users/edwardmiller/Documents/React/react-player/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/edwardmiller/Documents/React/react-player/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/edwardmiller/Documents/React/react-player/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/edwardmiller/Documents/React/react-player/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import Player from\"./components/Player.js\";import Song from\"./components/Song.js\";import\"./styles/app.scss\";import data from\"./data.js\";import{useState,useRef}from\"react\";import Library from\"./components/Library.js\";import Nav from\"./components/Nav.js\";function App(){//State\nvar _useState=useState(data()),_useState2=_slicedToArray(_useState,2),songs=_useState2[0],setSongs=_useState2[1];var _useState3=useState(songs[0]),_useState4=_slicedToArray(_useState3,2),currentSong=_useState4[0],setCurrentSong=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPlaying=_useState6[0],setIsPlaying=_useState6[1];var _useState7=useState({currentTime:0,duration:0}),_useState8=_slicedToArray(_useState7,2),songInfo=_useState8[0],setSongInfo=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),libraryStatus=_useState10[0],setLibraryStatus=_useState10[1];//Functions\nvar updateTime=function updateTime(e){var current=e.target.currentTime;var duration=e.target.duration;setSongInfo(_objectSpread(_objectSpread({},songInfo),{},{currentTime:current,duration:duration}));};var songEnd=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var currentIndex;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:currentIndex=songs.findIndex(function(song){return song.id===currentSong.id;});_context.next=3;return setCurrentSong(songs[(currentIndex+1)%songs.length]);case 3:if(isPlaying)audioRef.current.play();case 4:case\"end\":return _context.stop();}}},_callee);}));return function songEnd(){return _ref.apply(this,arguments);};}();//Ref\nvar audioRef=useRef(null);return/*#__PURE__*/_jsxs(\"div\",{className:\"App \".concat(libraryStatus?\"library-active\":\"\"),children:[/*#__PURE__*/_jsx(Nav,{libraryStatus:libraryStatus,setLibraryStatus:setLibraryStatus}),/*#__PURE__*/_jsx(Song,{currentSong:currentSong}),/*#__PURE__*/_jsx(Player,{setSongs:setSongs,songs:songs,setSongInfo:setSongInfo,songInfo:songInfo,audioRef:audioRef,isPlaying:isPlaying,setIsPlaying:setIsPlaying,currentSong:currentSong,setCurrentSong:setCurrentSong}),/*#__PURE__*/_jsx(Library,{libraryStatus:libraryStatus,songs:songs,setCurrentSong:setCurrentSong,audioRef:audioRef,isPlaying:isPlaying,setSongs:setSongs}),/*#__PURE__*/_jsx(\"audio\",{onLoadedMetadata:updateTime,onTimeUpdate:updateTime,ref:audioRef,src:currentSong.audio,onEnded:function onEnded(){return songEnd(\"skip-forward\");}})]});}export default App;","map":{"version":3,"sources":["/Users/edwardmiller/Documents/React/react-player/src/App.js"],"names":["Player","Song","data","useState","useRef","Library","Nav","App","songs","setSongs","currentSong","setCurrentSong","isPlaying","setIsPlaying","currentTime","duration","songInfo","setSongInfo","libraryStatus","setLibraryStatus","updateTime","e","current","target","songEnd","currentIndex","findIndex","song","id","length","audioRef","play","audio"],"mappings":"gvBAAA,MAAOA,CAAAA,MAAP,KAAmB,wBAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,sBAAjB,CACA,MAAO,mBAAP,CACA,MAAOC,CAAAA,IAAP,KAAiB,WAAjB,CACA,OAASC,QAAT,CAAmBC,MAAnB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,OAAP,KAAoB,yBAApB,CACA,MAAOC,CAAAA,GAAP,KAAgB,qBAAhB,CAEA,QAASC,CAAAA,GAAT,EAAe,CACb;AADa,cAEaJ,QAAQ,CAACD,IAAI,EAAL,CAFrB,wCAENM,KAFM,eAECC,QAFD,8BAGyBN,QAAQ,CAACK,KAAK,CAAC,CAAD,CAAN,CAHjC,yCAGNE,WAHM,eAGOC,cAHP,8BAIqBR,QAAQ,CAAC,KAAD,CAJ7B,yCAINS,SAJM,eAIKC,YAJL,8BAKmBV,QAAQ,CAAC,CACvCW,WAAW,CAAE,CAD0B,CAEvCC,QAAQ,CAAE,CAF6B,CAAD,CAL3B,yCAKNC,QALM,eAKIC,WALJ,8BAS6Bd,QAAQ,CAAC,KAAD,CATrC,0CASNe,aATM,gBASSC,gBATT,gBAUb;AACA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,CAAD,CAAO,CACxB,GAAMC,CAAAA,OAAO,CAAGD,CAAC,CAACE,MAAF,CAAST,WAAzB,CACA,GAAMC,CAAAA,QAAQ,CAAGM,CAAC,CAACE,MAAF,CAASR,QAA1B,CACAE,WAAW,gCACND,QADM,MAETF,WAAW,CAAEQ,OAFJ,CAGTP,QAAQ,CAARA,QAHS,GAAX,CAKD,CARD,CAUA,GAAMS,CAAAA,OAAO,0FAAG,oJACVC,YADU,CACKjB,KAAK,CAACkB,SAAN,CAAgB,SAACC,IAAD,QAAUA,CAAAA,IAAI,CAACC,EAAL,GAAYlB,WAAW,CAACkB,EAAlC,EAAhB,CADL,uBAERjB,CAAAA,cAAc,CAACH,KAAK,CAAC,CAACiB,YAAY,CAAG,CAAhB,EAAqBjB,KAAK,CAACqB,MAA5B,CAAN,CAFN,QAGd,GAAIjB,SAAJ,CAAekB,QAAQ,CAACR,OAAT,CAAiBS,IAAjB,GAHD,sDAAH,kBAAPP,CAAAA,OAAO,0CAAb,CAMA;AACA,GAAMM,CAAAA,QAAQ,CAAG1B,MAAM,CAAC,IAAD,CAAvB,CACA,mBACE,aAAK,SAAS,eAASc,aAAa,CAAG,gBAAH,CAAsB,EAA5C,CAAd,wBACE,KAAC,GAAD,EAAK,aAAa,CAAEA,aAApB,CAAmC,gBAAgB,CAAEC,gBAArD,EADF,cAEE,KAAC,IAAD,EAAM,WAAW,CAAET,WAAnB,EAFF,cAGE,KAAC,MAAD,EACE,QAAQ,CAAED,QADZ,CAEE,KAAK,CAAED,KAFT,CAGE,WAAW,CAAES,WAHf,CAIE,QAAQ,CAAED,QAJZ,CAKE,QAAQ,CAAEc,QALZ,CAME,SAAS,CAAElB,SANb,CAOE,YAAY,CAAEC,YAPhB,CAQE,WAAW,CAAEH,WARf,CASE,cAAc,CAAEC,cATlB,EAHF,cAcE,KAAC,OAAD,EACE,aAAa,CAAEO,aADjB,CAEE,KAAK,CAAEV,KAFT,CAGE,cAAc,CAAEG,cAHlB,CAIE,QAAQ,CAAEmB,QAJZ,CAKE,SAAS,CAAElB,SALb,CAME,QAAQ,CAAEH,QANZ,EAdF,cAsBE,cACE,gBAAgB,CAAEW,UADpB,CAEE,YAAY,CAAEA,UAFhB,CAGE,GAAG,CAAEU,QAHP,CAIE,GAAG,CAAEpB,WAAW,CAACsB,KAJnB,CAKE,OAAO,CAAE,yBAAMR,CAAAA,OAAO,CAAC,cAAD,CAAb,EALX,EAtBF,GADF,CAgCD,CAED,cAAejB,CAAAA,GAAf","sourcesContent":["import Player from \"./components/Player.js\";\nimport Song from \"./components/Song.js\";\nimport \"./styles/app.scss\";\nimport data from \"./data.js\";\nimport { useState, useRef } from \"react\";\nimport Library from \"./components/Library.js\";\nimport Nav from \"./components/Nav.js\";\n\nfunction App() {\n  //State\n  const [songs, setSongs] = useState(data());\n  const [currentSong, setCurrentSong] = useState(songs[0]);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [songInfo, setSongInfo] = useState({\n    currentTime: 0,\n    duration: 0,\n  });\n  const [libraryStatus, setLibraryStatus] = useState(false);\n  //Functions\n  const updateTime = (e) => {\n    const current = e.target.currentTime;\n    const duration = e.target.duration;\n    setSongInfo({\n      ...songInfo,\n      currentTime: current,\n      duration,\n    });\n  };\n\n  const songEnd = async () => {\n    let currentIndex = songs.findIndex((song) => song.id === currentSong.id);\n    await setCurrentSong(songs[(currentIndex + 1) % songs.length]);\n    if (isPlaying) audioRef.current.play();\n  };\n\n  //Ref\n  const audioRef = useRef(null);\n  return (\n    <div className={`App ${libraryStatus ? \"library-active\" : \"\"}`}>\n      <Nav libraryStatus={libraryStatus} setLibraryStatus={setLibraryStatus} />\n      <Song currentSong={currentSong} />\n      <Player\n        setSongs={setSongs}\n        songs={songs}\n        setSongInfo={setSongInfo}\n        songInfo={songInfo}\n        audioRef={audioRef}\n        isPlaying={isPlaying}\n        setIsPlaying={setIsPlaying}\n        currentSong={currentSong}\n        setCurrentSong={setCurrentSong}\n      />\n      <Library\n        libraryStatus={libraryStatus}\n        songs={songs}\n        setCurrentSong={setCurrentSong}\n        audioRef={audioRef}\n        isPlaying={isPlaying}\n        setSongs={setSongs}\n      />\n      <audio\n        onLoadedMetadata={updateTime}\n        onTimeUpdate={updateTime}\n        ref={audioRef}\n        src={currentSong.audio}\n        onEnded={() => songEnd(\"skip-forward\")}\n      ></audio>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}